# Git Workflow — Правила работы с Git

Этот документ описывает правила работы с Git для проекта HH Auto Respond.

## Формат коммитов

### Шаблон

```
verb (scope): краткое описание
```

### Обязательные компоненты

1. **verb** — глагол в нижнем регистре (например: `feat`, `fix`, `docs`)
2. **(scope)** — область изменений (например: `(auth)`, `(db)`, `(ui)`)
3. **краткое описание** — одна строка на русском языке

### Примеры

```bash
feat (auth): добавил OAuth авторизацию HH.ru
fix (db): исправил миграцию users таблицы
docs (readme): обновил инструкцию по установке
chore (deps): обновил Prisma до версии 5.20
refactor (services): вынес общую логику в базовый класс
```

## Стандартные глаголы

- `feat` — новая функциональность
- `fix` — исправление ошибки
- `docs` — изменения в документации
- `chore` — вспомогательные изменения (зависимости, конфигурация)
- `refactor` — рефакторинг без изменения функциональности
- `style` — форматирование кода (не влияет на логику)
- `add` — добавление новых элементов
- `improve` — улучшение существующего функционала
- `optimize` — оптимизация производительности

## Примеры по областям

### Backend (scope: auth, db, api, services)

```bash
feat (auth): добавил middleware для проверки токенов
fix (db): исправил индекс на поле telegram_id
refactor (api): вынес валидацию в отдельный модуль
chore (services): настроил логирование Winston
```

### Frontend (scope: ui, components, stores)

```bash
feat (ui): добавил компонент для отображения резюме
fix (components): исправил баг с обновлением списка
style (ui): обновил стили кнопок по Tailwind
refactor (stores): переписал userStore на Composition API
```

### Infrastructure (scope: docker, prisma, config)

```bash
feat (docker): добавил Redis контейнер для очередей
fix (prisma): исправил миграцию для таблицы applications
chore (config): обновил настройки TypeScript
docs (setup): добавил инструкцию по деплою
```

## Правила качества коммитов

### ✅ Хорошие практики

1. **Один коммит = одна логическая единица изменений**
   ```bash
   # ✅ Правильно
   git commit -m "feat (auth): добавил OAuth HH.ru"
   git commit -m "docs (readme): обновил секцию установки"
   ```

2. **Краткие сообщения (одна строка)**
   ```bash
   # ✅ Правильно
   fix (db): исправил миграцию users

   # ❌ Неправильно (многострочный)
   fix (db): исправил миграцию users

   - Добавил индекс
   - Изменил тип поля
   - Обновил seed
   ```

3. **Осмысленные описания**
   ```bash
   # ✅ Правильно
   feat (queues): добавил Bull очередь для проверки вакансий

   # ❌ Неправильно
   chore: обновления
   fix: исправления
   ```

### ❌ Плохие практики

1. **Мега-коммиты** (90+ файлов)
   - Разделяйте большие изменения на несколько логических коммитов

2. **Смешивание разных типов изменений**
   ```bash
   # ❌ Неправильно (смешивает feature + refactor + docs)
   feat (app): добавил OAuth + рефакторинг + обновил README
   ```

3. **Неинформативные сообщения**
   ```bash
   # ❌ Неправильно
   fix: баг
   update: код
   wip: работа в процессе
   ```

## Работа с ветками

### Именование веток

```bash
feature/short-description    # Новый функционал
bugfix/short-description     # Исправление ошибок
hotfix/short-description     # Экстренные исправления
```

### Примеры

```bash
feature/oauth-integration
bugfix/fix-token-refresh
hotfix/critical-db-error
```

## Процесс работы

1. **Создайте ветку для изменений**
   ```bash
   git checkout -b feature/my-feature
   ```

2. **Делайте коммиты по мере разработки**
   ```bash
   git add .
   git commit -m "feat (auth): добавил OAuth клиент"
   ```

3. **Перед созданием PR обновите ветку**
   ```bash
   git fetch origin
   git rebase origin/main
   ```

4. **Создайте Pull Request**
   - Используйте осмысленное название
   - Опишите изменения
   - Ссылайтесь на связанные issue

---

Следование этим правилам помогает поддерживать чистую историю Git и упрощает командную разработку.
